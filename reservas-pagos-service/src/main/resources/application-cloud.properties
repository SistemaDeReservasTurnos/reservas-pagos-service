# ==============================================================================
# PRODUCTION PROFILE (spring.profiles.active=prod)
# For production environment, cloud database, and cloud Eureka server.
# Execution Command: mvn "spring-boot:run" "-Dspring-boot.run.profiles=prod"
# (In real deployment, typically run via java -jar or Docker)
# ==============================================================================

# === Eureka Configuration - Production ===
# Uses the URL of the cloud-deployed Eureka server
eureka.client.service-url.defaultZone=${EUREKA_SERVICE_URL}
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true

# === Mercado Pago / Gateway Callback URLs - Production ===
# Must point to the public domain (e.g., https://api.tudominio.com)
app.payment.success-url=${PUBLIC_API_URL}/api/payments/callback/success
app.payment.pending-url=${PUBLIC_API_URL}/api/payments/callback/pending
app.payment.failure-url=${PUBLIC_API_URL}/api/payments/callback/failure

# === PostgreSQL Connection - Production ===
# Uses production environment variables
spring.datasource.url=${PROD_DATABASE_URL}
spring.datasource.username=${PROD_DATABASE_USER}
spring.datasource.password=${PROD_DATABASE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# === JPA / Hibernate Config - Production ===
# Do not show SQL in production for performance/security
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Cliente Feign (Self-call)
spring.security.oauth2.client.provider.self.token-uri=http://auth-service:8081/oauth2/token
spring.security.oauth2.client.registration.reservation-service-client.provider=self
spring.security.oauth2.client.registration.reservation-service-client.client-id=pagos-service
spring.security.oauth2.client.registration.reservation-service-client.client-secret=file:/etc/secrets/CLIENT_CREDENTIALS_SECRET_KEY_FILE
spring.security.oauth2.client.registration.reservation-service-client.authorization-grant-type=client_credentials
spring.security.oauth2.client.registration.reservation-service-client.scope=INTERNAL_SERVICE

# === Seguridad (Dinamica) ===
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://auth-service:8081/oauth2/jwks